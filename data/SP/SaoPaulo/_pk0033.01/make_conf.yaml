pack_id: 33.1
pkversion: 001
schemaId_input:    ref027a
schemaId_template: ref027a
codec:descr_encode: srid=29193

files:
  -
    p:    1
    file: 8e7be760f94bb385bb1b6a47feee3afce9c0fcf48317b554834a5ac30bc5a0cf.zip
    name: Edifícios
  -
    p:    2
    file: bae2054448855305db0fc855d2852cd5a7b369481cc03aeb809a0c3c162a2c04.zip
    name: Lotes
  -
    p:    3
    file: 75c003ca72fd92a2cd2146518c8bd69b6396dd1ee70d5e94c81107e27b498c12.zip
    name: Endereços

layers:

  building:
    subtype: none
    method: shp2sql
    file: 1
    orig_filename: SHP_edificacao
    orig_subfilename: SIRGAS_SHP_edificacao
    codec: SHP.ZIP
    sql_select: ['gid','geom']

  parcel:
    subtype: ext
    method: shp2sql
    file: 2
    orig_filename: SIRGAS_SHP_LOTES
    orig_subfilename: SIRGAS_SHP_LOTES
    codec: SHP.ZIP
    sql_select: ['gid','lo_setor || lo_quadra || lo_lote AS ref','geom']
    join_column: ref

  cadparcel:
    subtype: cmpl 
    method: csv2sql
    file: 3
    orig_filename: IPTU_2020
    codec: CSV~Latin1semicolon
    sql_select: ['row_number() OVER () AS gid', 'split_part(NUMERO DO CONTRIBUINTE, $$-$$, 1) AS ref' ,'NOME DE LOGRADOURO DO IMOVEL AS via_name' ,'NUMERO DO IMOVEL AS house_number','BAIRRO DO IMOVEL AS nsvia_name', 'CEP DO IMOVEL AS postcode']
    join_column: ref
