<aside>
<table align="right">
<tr><th>BR-AC-RioBranco</th></tr>
<tr><td>
Pacote: <a target="_git" href="http://git.digital-guard.org/preserv-BR/blob/main/data/AC/RioBranco/_pk0042.01"><small>_pk0042.01</small></a>
</td></tr>
<tr><td>
Doador: <a rel="external" target="_doador" href="http://www.riobranco.ac.gov.br/">Prefeitura Municipal de Rio Branco</a><br/>
<small>cnpj:04.034.583/0001-22</small> • <a rel="external" target="_doador" href="https://www.wikidata.org/wiki/Q56450051">Q56450051</a></small><br/>
Obtido via <i>email</i> em <b>2020-09-10</b><br/>
Avaliação técnica: igor<br/>
Representação institucional: Thierry<br/>
Licença: <b>CC0</b>
</td></tr>
<tr><td>Camadas: <a title="via" href="#-via"><img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-via.png" alt="via" width="20"/></a> <a title="block" href="#-block"><img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-block.png" alt="block" width="20"/></a> <a title="nsvia" href="#-nsvia"><img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-nsvia.png" alt="nsvia" width="20"/></a> <a title="parcel" href="#-parcel"><img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-parcel.png" alt="parcel" width="20"/></a> </td></tr>
<tr><td><a href="http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01">Dados publicados</a></td></tr>
</table>
</aside>

<section>

# Camadas de dados
## <img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-block.png" alt="block" width="20"/> block

Nome do arquivo: `rb_20201111/quadras`.<br/>Download: [73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip](http://dl.digital-guard.org/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip)<br/>Descrição: Bairros<br/>Tamanho do arquivo: 4527739 bytes (4.32 <abbr title="mebibyte">MiB</abbr>)<br/>Formato: shp<br/>SRID: 32719

#### Dados relevantes
* `iq` (ref): número de setor e quadra.

#### Dados publicados
[http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/block](http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/block)<br/>6846707 bytes (6.53 <abbr title="mebibyte">MiB</abbr>)<br/>4864 polígonos com 71 <abbr title="quilômetros quadrados">km²</abbr><br/>densidade média: 0.23 polígonos/km²
## <img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-nsvia.png" alt="nsvia" width="20"/> nsvia

Nome do arquivo: `rb_20201111/bairros`.<br/>Download: [73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip](http://dl.digital-guard.org/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip)<br/>Descrição: Bairros<br/>Tamanho do arquivo: 4527739 bytes (4.32 <abbr title="mebibyte">MiB</abbr>)<br/>Formato: shp<br/>SRID: 32719

#### Dados relevantes
* `name` (nsvia): nome do bairro em caixa alta, com acentuação.

#### Dados publicados
[http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/nsvia](http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/nsvia)<br/>550635 bytes (0.53 <abbr title="mebibyte">MiB</abbr>)<br/>129 polígonos com 153.71 <abbr title="quilômetros quadrados">km²</abbr><br/>densidade média: 0.02 polígonos/km²
## <img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-parcel.png" alt="parcel" width="20"/> parcel

Nome do arquivo: `rb_20201116/lotes`.<br/>Download: [d96f47270e22336cf4660f742ae4dba5694f15c6833363167c91d9fc9929871b.zip](http://dl.digital-guard.org/d96f47270e22336cf4660f742ae4dba5694f15c6833363167c91d9fc9929871b.zip)<br/>Descrição: Lotes<br/>Tamanho do arquivo: 12086731 bytes (11.53 <abbr title="mebibyte">MiB</abbr>)<br/>Formato: shp<br/>SRID: 32719

#### Dados relevantes
* `nomelog` (via): tipo e nome do logradouro em caixa alta, com acentuação.

* `endereco_n` (hnum): número predial. Sem número pode ser representado como &quot;S/N&quot;, &quot;s/n&quot;, &quot;SN&quot; etc.

#### Dados publicados
[http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/parcel](http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/parcel)<br/>23988306 bytes (22.88 <abbr title="mebibyte">MiB</abbr>)<br/>99701 polígonos com 66.27 <abbr title="quilômetros quadrados">km²</abbr><br/>densidade média: 0.52 polígonos/km²
## <img src="https://raw.githubusercontent.com/digital-guard/preserv/main/docs/assets/layerIcon-via.png" alt="via" width="20"/> via

Nome do arquivo: `logradouros`.<br/>Download: [29d68e5ce006079b06b710cc2df3aa08d6cb6934f32bc0b29fc46d3e8272ff77.rar](http://dl.digital-guard.org/29d68e5ce006079b06b710cc2df3aa08d6cb6934f32bc0b29fc46d3e8272ff77.rar)<br/>Descrição: Eixos<br/>Tamanho do arquivo: 316372 bytes (0.3 <abbr title="mebibyte">MiB</abbr>)<br/>Formato: shp<br/>SRID: 32719

#### Dados relevantes
* `tipo ||' '|| Nome` (via): tipo e nome do logradouro em caixa alta, com acentuação.

#### Comentários
Os eixos de ruas possui, em algumas áreas, desalinhamentos com o restante do material e com a imagem área, mesmo com a projeção indicada no arquivo PRJ. Há lugares em que o eixo da rua atravessa lotes e quadras.

#### Dados publicados
[http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/via](http://git.digital-guard.org/preservCutGeo-BR2021/tree/main/data/AC/RioBranco/_pk0042.01/via)<br/>618898 bytes (0.59 <abbr title="mebibyte">MiB</abbr>)<br/>3172 segmentos com 1030.79 <abbr title="quilômetros">km</abbr><br/>densidade média: 0.15 segmentos/km²

# Evidências de teste
<img src="qgis.png" width="400"/>

# Tarefas
* Corrigir a string dos nomes de logradouro nos lotes. Os lotes possuem erros de nome de logradouros, nestes casos: 1. na maioria está faltando um espaço entre o tipo de via e o nome (ex.\: &quot;RUACECÍLIA MEIRELES&quot;). 2. em alguns há dois espaços entre o tipo de via e o nome (ex.\: &quot;ALA  MATRINCHÃ&quot;). 3. e em alguns há uma vírgula ou ponto no final do nome (ex.\: &quot;VIAVERDE.&quot;).
* Gerar ponto de endereço na testada do lote com script desenvolvido pelo A4A.
</section>
<section>

# Reprodutibilidade

```bash

block:
rm -rf /tmp/sandbox/_pkBR421_001 || true
mkdir -m 777 -p /tmp/sandbox
mkdir -m 777 -p /tmp/sandbox/_pkBR421_001
mkdir -p /tmp/pg_io
wget -P /var/www/preserv.addressforall.org/download http://dl.digital-guard.org/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip
sudo chown postgres:www-data /var/www/preserv.addressforall.org/download/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip && sudo chmod 664 /var/www/preserv.addressforall.org/download/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip
psql $(pg_uri_db) -c "DROP  TABLE IF EXISTS pk7600004201201_p2_block CASCADE"
cd /tmp/sandbox/_pkBR421_001; 7z  x -y /var/www/preserv.addressforall.org/download/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip "*rb_20201111/quadras*" ; chmod -R a+rwx . > /dev/null
psql postgres://postgres@localhost/ingest1 -c "SELECT srid, proj4text FROM spatial_ref_sys where srid=32719"
cd /tmp/sandbox/_pkBR421_001; shp2pgsql -D   -s 32719 "rb_20201111/quadras.shp" pk7600004201201_p2_block | psql -q postgres://postgres@localhost/ingest1 2> /dev/null

psql postgres://postgres@localhost/ingest1 -c "SELECT ingest.any_load('shp2sql','/tmp/sandbox/_pkBR421_001/rb_20201111/quadras.shp','block_full','pk7600004201201_p2_block','7600004201201','73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip',array['gid', 'iq AS ref', 'geom'],5,1)"
@echo "Confira os resultados nas tabelas ingest.donated_packcomponent e ingest.feature_asis".
rm -f "/tmp/sandbox/_pkBR421_001/*rb_20201111/quadras.*" || true
psql $(pg_uri_db) -c "DROP TABLE IF EXISTS pk7600004201201_p2_block CASCADE"
mkdir -m777 -p /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/block
rm -rf /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/block/*.geojson
psql $(pg_uri_db) -c "SELECT ingest.publicating_geojsons('block','BR-AC-RioBranco','/var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/block','1',9,3);"
cd /var/gits/_dg/preserv/src; sudo bash fixaPermissoes.sh /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/block

nsvia:
rm -rf /tmp/sandbox/_pkBR421_001 || true
mkdir -m 777 -p /tmp/sandbox
mkdir -m 777 -p /tmp/sandbox/_pkBR421_001
mkdir -p /tmp/pg_io
wget -P /var/www/preserv.addressforall.org/download http://dl.digital-guard.org/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip
sudo chown postgres:www-data /var/www/preserv.addressforall.org/download/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip && sudo chmod 664 /var/www/preserv.addressforall.org/download/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip
psql $(pg_uri_db) -c "DROP  TABLE IF EXISTS pk7600004201201_p2_nsvia CASCADE"
cd /tmp/sandbox/_pkBR421_001; 7z  x -y /var/www/preserv.addressforall.org/download/73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip "*rb_20201111/bairros*" ; chmod -R a+rwx . > /dev/null
psql postgres://postgres@localhost/ingest1 -c "SELECT srid, proj4text FROM spatial_ref_sys where srid=32719"
cd /tmp/sandbox/_pkBR421_001; shp2pgsql -D   -s 32719 "rb_20201111/bairros.shp" pk7600004201201_p2_nsvia | psql -q postgres://postgres@localhost/ingest1 2> /dev/null

psql postgres://postgres@localhost/ingest1 -c "SELECT ingest.any_load('shp2sql','/tmp/sandbox/_pkBR421_001/rb_20201111/bairros.shp','nsvia_full','pk7600004201201_p2_nsvia','7600004201201','73d02ba0ae4b0a994a629f7d06f0a027259f5c1d97e53f9b771fecd345c2a02b.zip',array['gid', 'name AS nsvia', 'geom'],5,1)"
@echo "Confira os resultados nas tabelas ingest.donated_packcomponent e ingest.feature_asis".
rm -f "/tmp/sandbox/_pkBR421_001/*rb_20201111/bairros.*" || true
psql $(pg_uri_db) -c "DROP TABLE IF EXISTS pk7600004201201_p2_nsvia CASCADE"
mkdir -m777 -p /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/nsvia
rm -rf /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/nsvia/*.geojson
psql $(pg_uri_db) -c "SELECT ingest.publicating_geojsons('nsvia','BR-AC-RioBranco','/var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/nsvia','1',9,3);"
cd /var/gits/_dg/preserv/src; sudo bash fixaPermissoes.sh /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/nsvia

parcel:
rm -rf /tmp/sandbox/_pkBR421_001 || true
mkdir -m 777 -p /tmp/sandbox
mkdir -m 777 -p /tmp/sandbox/_pkBR421_001
mkdir -p /tmp/pg_io
wget -P /var/www/preserv.addressforall.org/download http://dl.digital-guard.org/d96f47270e22336cf4660f742ae4dba5694f15c6833363167c91d9fc9929871b.zip
sudo chown postgres:www-data /var/www/preserv.addressforall.org/download/d96f47270e22336cf4660f742ae4dba5694f15c6833363167c91d9fc9929871b.zip && sudo chmod 664 /var/www/preserv.addressforall.org/download/d96f47270e22336cf4660f742ae4dba5694f15c6833363167c91d9fc9929871b.zip
psql $(pg_uri_db) -c "DROP  TABLE IF EXISTS pk7600004201101_p1_parcel CASCADE"
cd /tmp/sandbox/_pkBR421_001; 7z  x -y /var/www/preserv.addressforall.org/download/d96f47270e22336cf4660f742ae4dba5694f15c6833363167c91d9fc9929871b.zip "*rb_20201116/lotes*" ; chmod -R a+rwx . > /dev/null
psql postgres://postgres@localhost/ingest1 -c "SELECT srid, proj4text FROM spatial_ref_sys where srid=32719"
cd /tmp/sandbox/_pkBR421_001; shp2pgsql -D   -s 32719 "rb_20201116/lotes.shp" pk7600004201101_p1_parcel | psql -q postgres://postgres@localhost/ingest1 2> /dev/null

psql postgres://postgres@localhost/ingest1 -c "SELECT ingest.any_load('shp2sql','/tmp/sandbox/_pkBR421_001/rb_20201116/lotes.shp','parcel_full','pk7600004201101_p1_parcel','7600004201101','d96f47270e22336cf4660f742ae4dba5694f15c6833363167c91d9fc9929871b.zip',array['gid', 'nomelog AS via', 'endereco_n AS hnum'],5,1)"
@echo "Confira os resultados nas tabelas ingest.donated_packcomponent e ingest.feature_asis".
rm -f "/tmp/sandbox/_pkBR421_001/*rb_20201116/lotes.*" || true
psql $(pg_uri_db) -c "DROP TABLE IF EXISTS pk7600004201101_p1_parcel CASCADE"
mkdir -m777 -p /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/parcel
rm -rf /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/parcel/*.geojson
psql $(pg_uri_db) -c "SELECT ingest.publicating_geojsons('parcel','BR-AC-RioBranco','/var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/parcel','1',9,3);"
cd /var/gits/_dg/preserv/src; sudo bash fixaPermissoes.sh /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/parcel

via:
rm -rf /tmp/sandbox/_pkBR421_001 || true
mkdir -m 777 -p /tmp/sandbox
mkdir -m 777 -p /tmp/sandbox/_pkBR421_001
mkdir -p /tmp/pg_io
wget -P /var/www/preserv.addressforall.org/download http://dl.digital-guard.org/29d68e5ce006079b06b710cc2df3aa08d6cb6934f32bc0b29fc46d3e8272ff77.rar
sudo chown postgres:www-data /var/www/preserv.addressforall.org/download/29d68e5ce006079b06b710cc2df3aa08d6cb6934f32bc0b29fc46d3e8272ff77.rar && sudo chmod 664 /var/www/preserv.addressforall.org/download/29d68e5ce006079b06b710cc2df3aa08d6cb6934f32bc0b29fc46d3e8272ff77.rar
psql $(pg_uri_db) -c "DROP  TABLE IF EXISTS pk7600004201301_p3_via CASCADE"
cd /tmp/sandbox/_pkBR421_001; 7z  x -y /var/www/preserv.addressforall.org/download/29d68e5ce006079b06b710cc2df3aa08d6cb6934f32bc0b29fc46d3e8272ff77.rar "*logradouros*" ; chmod -R a+rwx . > /dev/null
psql postgres://postgres@localhost/ingest1 -c "SELECT srid, proj4text FROM spatial_ref_sys where srid=32719"
cd /tmp/sandbox/_pkBR421_001; shp2pgsql -D   -s 32719 "logradouros.shp" pk7600004201301_p3_via | psql -q postgres://postgres@localhost/ingest1 2> /dev/null

psql postgres://postgres@localhost/ingest1 -c "CREATE VIEW vw3_pk7600004201301_p3_via AS SELECT gid, tipo ||' '|| Nome AS via,  geom FROM $(tabname)"
psql postgres://postgres@localhost/ingest1 -c "SELECT ingest.any_load('shp2sql','/tmp/sandbox/_pkBR421_001/logradouros.shp','via_full','vw3_pk7600004201301_p3_via','7600004201301','29d68e5ce006079b06b710cc2df3aa08d6cb6934f32bc0b29fc46d3e8272ff77.rar',array[]::text[],5,1)"
psql postgres://postgres@localhost/ingest1 -c "DROP VIEW vw3_pk7600004201301_p3_via"
@echo "Confira os resultados nas tabelas ingest.donated_packcomponent e ingest.feature_asis".
rm -f "/tmp/sandbox/_pkBR421_001/*logradouros.*" || true
psql $(pg_uri_db) -c "DROP TABLE IF EXISTS pk7600004201301_p3_via CASCADE"
mkdir -m777 -p /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/via
rm -rf /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/via/*.geojson
psql $(pg_uri_db) -c "SELECT ingest.publicating_geojsons('via','BR-AC-RioBranco','/var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/via','1',9,3);"
cd /var/gits/_dg/preserv/src; sudo bash fixaPermissoes.sh /var/gits/_dg/preservCutGeo-BR2021/data/AC/RioBranco/_pk0042.01/via

```
</section>

# Anexo

Foi recebido via email 3 arquivos, os quais foram renomeados para facilitar:
* rb_20201111 (1) (2).zip -> rb_20201111.zip.
* rb_20201116 (2).zip -> rb_20201116.zip.
* E-SIC 13131.0000372020-46 - SEFIN RESPOSTA.rar -> E-SIC_SEFIN.rar

Abreviaturas raras usadas em eixos:
* RO, RD = Rodovia (equivalente de VIA para os lotes)
* RM = Ramal (equivalente de RM para os lotes)
* ES, EST = Estrada
* BR = Rodovia BR. Se for "BR VIA VERDE", é o equivalente de VIA VERDE dos lotes.
* BC = Beco
* ALA, ALAM = Alameda

